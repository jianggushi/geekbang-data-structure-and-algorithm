#### 05 | 数组：为什么很多编程语言中数组都从0开始编号？

数组（Array）是一种线性表数据结构。它用一组连续的内存空间，来存储一组具有相同类型的数据。

##### 线性表

字面意思就是数据排成一条线一样的结构，数据元素之间是一一对应的关系。常见的线性表结构：数组、链表、队列、栈等。

与之对应的是非线性表，数据之间不是简单的前后一一对应的关系，比如：树，图等。

##### 连续的内存空间和相同的数据类型

数据在内存中是连续存储的，而且元素间隔相同，每个元素的地址就可以很方便的计算出来：

```
a[i] = base + i * type_size
```

##### 随机访问

数组支持随机访问，根据下标随机访问的时间复杂度为 O(1)。

> 链表适合插入、删除，时间复杂度 O(1)；数组适合查找，查找时间复杂度为 O(1)。
>
> 这种说法是不准确的，即使是二分查找复杂度也为 O(logn)

##### 低效的插入和删除

数组元素是连续存储的，带来的好处是随机访问，同时也有弊端：

为了保持数据的连续性，在插入和删除的时候需要进行数据的搬移。

比如：

在数组末尾插入元素，不需要额外移动数据，时间复杂度为 O(1)

在数组头部插入元素，原来所有的数据都需要依次向后移动，时间复杂度为 O(n)

假设在每个位置插入的概率是一样的，那么平均时间复杂度 O(n)

总结一下

插入和删除的最好情况时间复杂度 O(1)

插入和删除的最坏情况时间复杂度 O(n)

插入和删除的平均情况时间复杂度 O(n)

> 插入和删除复杂度的产生就是因为为了保持数据的连续性而做的数据搬移操作，所以为了降低复杂度，需要在数据的搬移上下功夫。
>
> 比如：数据删除时只是记录被删除的位置，并不真正的删除，当在没有更多的空间时再触发删除等等。

##### 数组越界访问

在 C 语言中数组越界是一种未决行为，没有规定数组访问越界时编译器应该如何处理。但在 Java 等语言中会做越界检查，数组越界会抛出异常 java.lang.ArrayIndexOutOfBoundException

##### 容器 ArrayList

Java 中提供了容器类 ArrayList，内部其实也是数组实现的，不过将很多数组操作的细节封装了起来：插入、删除、动态扩容。

容器省时省力但会损失性能，数组则需要自己封装实现功能。

##### 为什么大多数语言中，数组编号从 0 开始，而不是从 1 开始

一个是历史原因，另一个就是效率问题。

从 1 开始，第 i 个元素的位置计算，比从 0 开始多了次减法运算：

```
a[i] = base + (i - 1) * type_size
```

可以参考下：http://cenalulu.github.io/linux/why-array-start-from-zero/

##### 总结

数组支持随机访问，时间复杂度 O(1)

插入和删除比较低效，平均时间复杂度 O(n)

容器类可以帮助快速开发，数组则可以实现更加高效